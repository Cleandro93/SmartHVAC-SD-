{"version":3,"sources":["webpack:///./src/app/test/test.module.ts","webpack:///./src/app/test/test.page.html","webpack:///./src/app/test/test.page.scss","webpack:///./src/app/test/test.page.ts"],"names":[],"mappings":"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","file":"test-test-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TestPage } from './test.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TestPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [TestPage]\n})\nexport class TestPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button color=\\\"tertiary\\\"></ion-menu-button>\\n    </ion-buttons>\\n    <!-- <div class=\\\"light\\\" slot=\\\"end\\\"></div> -->\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n    <br><br><br><br><br>\\n    <div class=\\\"signalStatus\\\">\\n        <div id=\\\"rValue\\\"><p>R</p></div><br><br><br>\\n        <div id=\\\"yValue\\\"><p>Y</p></div><br><br><br>\\n        <div id=\\\"ghValue\\\"><p>GH</p></div><br><br><br>\\n        <div id=\\\"glValue\\\"><p>GL</p></div><br><br><br>\\n        <div id=\\\"wValue\\\"><p>W</p></div><br><br><br>\\n        <div id=\\\"bValue\\\"><p>B</p></div>\\n    </div>\\n    <div class=\\\"signalControl\\\">\\n        <ion-toggle class=\\\"signalsToggles\\\" color=\\\"primary\\\" [(ngModel)]=\\\"rToogle\\\" (ionChange)=\\\"signalLineChanged()\\\"></ion-toggle><br><br><br>\\n        <ion-toggle class=\\\"signalsToggles\\\" color=\\\"primary\\\"></ion-toggle><br><br><br>\\n        <ion-toggle class=\\\"signalsToggles\\\" color=\\\"primary\\\"></ion-toggle><br><br><br>\\n        <ion-toggle class=\\\"signalsToggles\\\" color=\\\"primary\\\"></ion-toggle><br><br><br>\\n        <ion-toggle class=\\\"signalsToggles\\\" color=\\\"primary\\\"></ion-toggle><br><br><br>\\n        <ion-toggle class=\\\"signalsToggles\\\" color=\\\"primary\\\"></ion-toggle><br><br><br>\\n    </div>\\n\\n</ion-content>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3Rlc3QvdGVzdC5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { Router, RouterEvent } from '@angular/router';\nimport { NavController } from '@ionic/angular';\nimport { BLE } from '@ionic-native/ble/ngx';\nimport { Storage } from '@ionic/storage';\nimport { ToastController, AlertController } from '@ionic/angular';\nimport { NgZone } from '@angular/core';\n\n@Component({\n  selector: 'app-test',\n  templateUrl: './test.page.html',\n  styleUrls: ['./test.page.scss'],\n})\nexport class TestPage implements OnInit {\n  selectedPath = '';\n  category: string;\n  device: any;\n  statusMessage: string;\n  sensorData: Uint8Array;\n  data: number[] = [0, 1, 1, 1, 0, 0];\n  prevData: number[];\n  on = 0;\n  off = 1;\n  rToogle = true;\n\n  // Test data\n  testData: number[] = [1, 0, 1, 1, 0, 0, 0, 1];\n\n  constructor(private navCtrl: NavController,\n              private router: Router,\n              private ble: BLE,\n              public storage: Storage,\n              public alertController: AlertController,\n              private ngZone: NgZone) {\n    this.router.events.subscribe((event: RouterEvent) => {\n      this.selectedPath = event.url;\n    });\n  }\n\n  ngOnInit() {\n    /*\n    this.storage.get('bleDevice').then((val) => {\n      console.log('Your age is', val);\n      let receivedObject = JSON.parse(val);\n      this.device = receivedObject;\n      console.log('Received this Object: ' + this.device);\n      console.log('Type of OBJ is ' + typeof(this.device));\n      console.log('Device name passed is: ' + this.device.name);\n      this.onRead(this.device);\n    });\n    */\n\n    this.testing(this.data);\n\n    this.rToogle = (this.data[0] === this.on) ? true : false;\n  }\n\n  onRead(device) {\n    // Update the UI with the current state of the switch characteristic\n    this.ble.read(device.id, 'D0AF', '7B53').then(\n      buffer => {\n        let data = new Uint8Array(buffer);\n        let len = data.length;\n        this.ngZone.run(() => {\n            for (let index = 0; index < len; index++) {\n              console.log(\"Did index: \" + index);\n              this.getThermStatus(index, data[index]);\n            }\n        });\n      }\n    );\n  }\n\n  testing(data: number[]) {\n    console.log('Data is sent now: ' + this.data);\n    const len = data.length;\n    console.log('value is: ');\n    for (let index = 0; index < len; index++) {\n      // this.wait(500);\n      // console.log('Index is: ' + index);\n      this.getThermStatus(index, data[index]);\n    }\n  }\n\n  getThermStatus(index: number, value: number) {\n    switch (index) {\n      case 0:\n        this.changeColor('rValue', value);\n        break;\n      case 1:\n        this.changeColor('yValue', value);\n        break;\n      case 2:\n        this.changeColor('ghValue', value);\n        break;\n      case 3:\n        this.changeColor('glValue', value);\n        break;\n      case 4:\n        this.changeColor('wValue', value);\n        break;\n      case 5:\n        this.changeColor('bValue', value);\n        break;\n      default:\n        console.log('value is: ' + value);\n        console.log('Error parsing the control lines status\\n');\n    }\n  }\n  changeColor(id: string, value: number) {\n    console.log('Changed rToggle 1');\n    const div = document.getElementById(id);\n    console.log('Changed rToggle 1 and id: ' + id);\n\n    if (value === this.on) {\n      div.setAttribute('id', 'onDiv');\n      console.log('Changed rToggle on');\n    } else if (value === this.off) {\n      div.setAttribute('id', 'offDiv');\n      console.log('Changed rToggle off');\n    }\n  }\n\n  signalLineChanged() {\n    console.log('Changed rToggle');\n    console.log('The value of rToggle is: ' + this.rToogle);\n    if (this.rToogle) {\n      console.log('It is True');\n      this.data[0] = this.on;\n      this.changeColor('rValue', this.data[0]);\n    } else {\n      console.log('It is False');\n      this.data[0] = this.off;\n      this.changeColor('rValue', this.data[0]);\n    }\n    console.log('Data is now: ' + this.data);\n\n    // this.wait(1500);\n    // this.testing(this.data);\n    // this.getThermStatus(0, this.data[0]);\n  }\n\n  onWrite() {\n    console.log('onRead');\n    const buffer = new Uint8Array(this.data).buffer as ArrayBuffer;\n    console.log('Data is: ' + this.data[0]);\n    console.log('Type is: ' + typeof(buffer));\n    console.log('The whole array is: ' + this.data);\n    this.ble.write(this.device.id, 'D0AF', '7B53', buffer).then(\n      // () => this.setStatus('Light is ' + (this.data[0] ? 'on' : 'off')),\n      // e => this.presentAlert('Unexpected Error', 'Error updating power switch')\n    );\n  }\n\n  wait(ms) {\n    const start = new Date().getTime();\n    let end = start;\n    while (end < start + ms) {\n      end = new Date().getTime();\n   }\n }\n\n  /*\n  segmentChanged(ev: any) {\n    this.category = ev.detail.value;\n    console.log(ev);\n    switch (this.category) {\n      case 'connection': {\n        this.navCtrl.navigateRoot('/bluetooth');\n        break;\n      }\n      case 'liveData': {\n        this.navCtrl.navigateRoot('/tabs');\n        break;\n      }\n      case 'thermostat': {\n        this.navCtrl.navigateRoot('/thermostat');\n        break;\n      }\n      case 'test': {\n        this.navCtrl.navigateRoot('/test');\n        break;\n      }\n      default: {\n        this.navCtrl.navigateRoot('/test');\n        break;\n      }\n    }\n  }\n  */\n\n}\n"],"sourceRoot":""}